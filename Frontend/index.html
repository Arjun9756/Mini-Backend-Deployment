<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini S3 Bucket - Secure File Storage</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="spinner"></div>
        <p>Processing...</p>
    </div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Auth Container -->
    <div id="authContainer" class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <h1><i class="fas fa-cloud"></i> Mini S3 Bucket</h1>
                <p>Secure File Storage & Management</p>
            </div>

            <!-- Login Form -->
            <div id="loginForm" class="auth-form active">
                <h2>Welcome Back</h2>
                <form id="loginFormElement">
                    <div class="input-group">
                        <i class="fas fa-envelope"></i>
                        <input type="email" id="loginEmail" placeholder="Email Address" required>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="loginPassword" placeholder="Password" required>
                        <button type="button" class="toggle-password" onclick="togglePassword('loginPassword')">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <button type="submit" class="auth-btn">
                        <i class="fas fa-sign-in-alt"></i> Sign In
                    </button>
                </form>
                <p class="auth-switch">
                    Don't have an account? 
                    <a href="#" onclick="switchToRegister()">Create Account</a>
                </p>
            </div>

            <!-- Register Form -->
            <div id="registerForm" class="auth-form">
                <h2>Create Account</h2>
                <form id="registerFormElement">
                    <div class="input-group">
                        <i class="fas fa-user"></i>
                        <input type="text" id="registerName" placeholder="Full Name" required>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-envelope"></i>
                        <input type="email" id="registerEmail" placeholder="Email Address" required>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="registerPassword" placeholder="Password" required>
                        <button type="button" class="toggle-password" onclick="togglePassword('registerPassword')">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                    <button type="submit" class="auth-btn">
                        <i class="fas fa-user-plus"></i> Create Account
                    </button>
                </form>
                <p class="auth-switch">
                    Already have an account? 
                    <a href="#" onclick="switchToLogin()">Sign In</a>
                </p>
            </div>
        </div>
        
        <!-- Auth Footer -->
        <footer class="auth-footer">
            <div class="auth-footer-content">
                <p>&copy; 2026 Mini S3 Bucket. All rights reserved.</p>
                <p>Developed with ❤️ by <strong>Arjun Singh Negi (Aka Aaju)</strong></p>
            </div>
        </footer>
    </div>

    <!-- Main Dashboard -->
    <div id="dashboardContainer" class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-left">
                <h1><i class="fas fa-cloud"></i> Mini S3 Bucket</h1>
                <span id="userWelcome" class="user-welcome"></span>
            </div>
            <div class="header-right">
                <div class="api-info">
                    <button id="showApiBtn" class="api-btn">
                        <i class="fas fa-key"></i> API Keys
                    </button>
                </div>
                <button id="logoutBtn" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </header>

        <!-- API Keys Modal -->
        <div id="apiModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-key"></i> Your API Credentials</h3>
                    <button class="close-modal" onclick="closeApiModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="api-warning">
                        <i class="fas fa-exclamation-triangle"></i>
                        <p>Keep these credentials secure. We are not responsible for any legal compliance issues.</p>
                    </div>
                    <div class="api-field">
                        <label>API Key:</label>
                        <div class="api-value">
                            <input type="text" id="apiKeyDisplay" readonly>
                            <button onclick="copyToClipboard('apiKeyDisplay')">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>
                    <div class="api-field">
                        <label>API Secret:</label>
                        <div class="api-value">
                            <input type="password" id="apiSecretDisplay" readonly>
                            <button onclick="toggleApiSecret()">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <main class="dashboard-main">
            <!-- Upload Section -->
            <section class="upload-section">
                <div class="upload-card">
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <h3>Upload Files</h3>
                        <p>Drag and drop files here or click to browse</p>
                        <input type="file" id="fileInput" multiple hidden>
                        <button class="upload-btn" onclick="document.getElementById('fileInput').click()">
                            <i class="fas fa-plus"></i> Choose Files
                        </button>
                    </div>
                    <div id="uploadProgress" class="upload-progress hidden">
                        <div class="progress-bar">
                            <div class="progress-fill"></div>
                        </div>
                        <p class="progress-text">Uploading...</p>
                    </div>
                </div>
            </section>

            <!-- Files Section -->
            <section class="files-section">
                <div class="section-header">
                    <h2><i class="fas fa-folder"></i> Your Files</h2>
                    <button id="refreshBtn" class="refresh-btn" onclick="loadFiles()">
                        <i class="fas fa-sync-alt"></i> Refresh
                    </button>
                </div>
                <div id="filesContainer" class="files-container">
                    <div class="loading-files">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Loading files...</p>
                    </div>
                </div>
            </section>

            <!-- Analysis Section -->
            <section class="analysis-section">
                <div class="section-header">
                    <h2><i class="fas fa-shield-alt"></i> Security Analysis</h2>
                    <div class="analysis-info">
                        <button id="refreshAnalysisBtn" class="refresh-btn" onclick="manualRefreshAnalysis()" title="Refresh Analysis">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                        <small id="lastUpdated" class="last-updated">Auto-refreshing every 60s</small>
                    </div>
                </div>
                <div id="analysisContainer" class="analysis-container">
                    <div class="analysis-placeholder">
                        <i class="fas fa-search"></i>
                        <p>Upload files to see security analysis</p>
                    </div>
                </div>
            </section>

            <!-- Security Notice -->
            <section class="security-notice">
                <div class="notice-card">
                    <div class="notice-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div class="notice-content">
                        <h3><i class="fas fa-exclamation-circle"></i> Important Security Notice</h3>
                        <p><strong>All uploaded files and data are automatically deleted after 24 hours for security purposes.</strong></p>
                        <p>This ensures your data privacy and prevents unauthorized access to old files. Please download important files before the 24-hour period expires.</p>
                        <ul>
                            <li><i class="fas fa-check-circle"></i> Files are scanned for viruses using VirusTotal</li>
                            <li><i class="fas fa-check-circle"></i> All data is encrypted during transmission</li>
                            <li><i class="fas fa-check-circle"></i> Automatic cleanup runs every 24 hours</li>
                            <li><i class="fas fa-check-circle"></i> Files are deleted from both server and database</li>
                        </ul>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="dashboard-footer">
            <div class="footer-content">
                <div class="footer-section">
                    <h4><i class="fas fa-cloud"></i> Mini S3 Bucket</h4>
                    <p>Secure cloud file storage with virus scanning</p>
                </div>
                <div class="footer-section">
                    <h4><i class="fas fa-user"></i> Developer</h4>
                    <p><strong>Arjun Singh Negi (Aka Aaju)</strong></p>
                    <div class="contact-links">
                        <a href="https://github.com/Arjun9756" target="_blank" rel="noopener noreferrer">
                            <i class="fab fa-github"></i> GitHub
                        </a>
                        <a href="https://www.linkedin.com/in/arjun-singh-negi-60b983302/" target="_blank" rel="noopener noreferrer">
                            <i class="fab fa-linkedin"></i> LinkedIn
                        </a>
                        <a href="mailto:as9604793@gmail.com">
                            <i class="fas fa-envelope"></i> Email
                        </a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4><i class="fas fa-info-circle"></i> Information</h4>
                    <p><i class="fas fa-clock"></i> Files auto-delete after 24 hours</p>
                    <p><i class="fas fa-shield-alt"></i> Virus scanning enabled</p>
                    <p><i class="fas fa-lock"></i> Secure file sharing</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 Mini S3 Bucket. All rights reserved. | Developed with ❤️ by Arjun Singh Negi (Aka Aaju)</p>
            </div>
        </footer>
    </div>

    <!-- File Actions Modal -->
    <div id="fileModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="fileModalTitle">File Actions</h3>
                <button class="close-modal" onclick="closeFileModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="file-actions">
                    <button id="downloadBtn" class="action-btn download">
                        <i class="fas fa-download"></i> Download
                    </button>
                    <button id="shareBtn" class="action-btn share">
                        <i class="fas fa-share"></i> Share
                    </button>
                    <button id="deleteBtn" class="action-btn delete">
                        <i class="fas fa-trash"></i> Delete
                    </button>
                </div>
                <div id="shareSection" class="share-section hidden">
                    <h4>Share with Email</h4>
                    <div class="input-group">
                        <input type="email" id="shareEmail" placeholder="Enter email address">
                        <button id="shareSubmitBtn" class="share-submit-btn">Share</button>
                    </div>
                    <div id="shareResult" class="share-result hidden"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Account Modal -->
    <div id="deleteAccountModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-exclamation-triangle"></i> Delete Account</h3>
                <button class="close-modal" onclick="closeDeleteAccountModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete your account? This action cannot be undone.</p>
                <div class="modal-actions">
                    <button class="cancel-btn" onclick="closeDeleteAccountModal()">Cancel</button>
                    <button class="delete-btn" onclick="deleteAccount()">Delete Account</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>